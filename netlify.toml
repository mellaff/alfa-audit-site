[build]
command = "npm run build"
publish = "dist"

# ---- Canonical host: force HTTPS + apex (alfaaudit.am) ----
# Redirects from all non-preferred versions to https://alfaaudit.am/
[[redirects]]
from = "http://alfaaudit.am/*"
to   = "https://alfaaudit.am/:splat"
status = 301
force = true

[[redirects]]
from = "http://www.alfaaudit.am/*"
to   = "https://alfaaudit.am/:splat"
status = 301
force = true

[[redirects]]
from = "https://www.alfaaudit.am/*"
to   = "https://alfaaudit.am/:splat"
status = 301
force = true

[[redirects]]
from = "/robots.txt"
to = "/robots.txt"
status = 200

[[redirects]]
from = "/sitemap.xml"
to = "/sitemap.xml"
status = 200

# ---- SPA fallback (must be last rule) ----
# Serve index.html for all requests that don't match a static file
[[redirects]]
from = "/*"
to   = "/index.html"
status = 200